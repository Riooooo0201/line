{% extends 'index.html' %}
{% block title %}投稿一覧{% endblock %}
{% block content %}
<h1 id="page-title">投稿一覧</h1>
<p>ここにみんなの日記が匿名で表示されます。</p>
<!-- 今はダミーデータを表示 -->
<div class="post">
    <p><strong>生徒A</strong></p>
    <p>今日の日記です。楽しかった！</p>
    <small>2025-11-10 10:00</small>
    <button>いいね！</button><span>0</span>
    <hr>
</div>
<div class="post">
    <p><strong>生徒B</strong></p>
    <p>勉強頑張った。</p>
    <small>2025-11-10 09:30</small>
    <button>いいね！</button><span>0</span>
    <hr>
</div>

<script>
    // ベーステンプレートから 'liff-ready' イベントが発行されるのを待つ
    document.body.addEventListener('liff-ready', (e) => {
        const profile = e.detail.profile;
        console.log("LIFF Profile on PostsPage (from event):", profile);

        const pageTitle = document.getElementById('page-title');
        if (pageTitle) {
            pageTitle.innerText = `${profile.displayName}さんのタイムライン`;
        }
    });
</script>
{% endblock %}